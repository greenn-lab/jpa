# ì—°ê´€ê´€ê³„ ë§¤í•‘ ê¸°ì´ˆ
**ê°ì²´ì˜ ì°¸ì¡°**ì™€ **í…Œì´ë¸”ì˜ ì™¸ë˜ í‚¤ë¥¼ ë§¤í•‘**í•´ë´ìš”!
- **ë°©í–¥ direction** ë‹¨ë°©í–¥, ì–‘ë°©í–¥ì´ ìˆì–´ìš”. ê°ì²´ëŠ” ì°¸ì¡°ì— ë”°ë¼ ë°©í–¥ì´ ìˆì§€ë§Œ, í…Œì´ë¸” ê´€ê³„ëŠ” í•­ìƒ ì–‘ë°©í–¥ì´ë˜ìš”.
- **ë‹¤ì¤‘ì„± multiplicity** ë‹¤ëŒ€ì¼(N:1), ì¼ëŒ€ë‹¤(1:N), ì¼ëŒ€ì¼(1:1), ë‹¤ëŒ€ë‹¤(N:M) ì¸ ë‹¤ì¤‘ì„±ì´ ìˆëŒ€ìš”.
- **ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ owner** ê°ì²´ê°€ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ë¼ë©´ ì£¼ì¸ì„ ì •í•´ì•¼í•œëŒ€ìš”.

## 1. ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„
ë‹¤ëŒ€ì¼ ë‹¨ë°©í–¥ ê´€ê³„ë¥¼ ì•Œì•„ë³´ìë„¤ìš”.
  > íšŒì›ê³¼ íŒ€ì´ ìˆê³   
  > íšŒì›ì€ í•˜ë‚˜ì˜ íŒ€ì—ë§Œ  ì†Œì†ë  ìˆ˜ ìˆë‹¤ë©´  
  > íšŒì›ê³¼ íŒ€ì€ ë‹¤ëŒ€ì¼ ê´€ê³„!

#### ê°ì²´ì˜ ì—°ê´€ê´€ê³„

![ë‹¤ëŒ€ì¼ ê°ì²´ ì—°ê´€ê´€ê³„](05_1.svg)

- íšŒì› ê°ì²´ëŠ” `Member.team` í•„ë“œë¡œ íŒ€ ê°ì²´ì™€ ì—°ê´€ê´€ê³„ ë§ºì–´ìš”.
- íšŒì› ê°ì²´ì™€ íŒ€ ê°ì²´ëŠ” ë‹¨ë°©í–¥ ê´€ê³„ë¼ í•œëŒ€ìš”. íšŒì›ì€ `Member.team` í•„ë“œë¡œ íŒ€ì„ ì•Œìˆ˜ ìˆì§€ë§Œ, íŒ€ì€ íšŒì›ì„ ì•Œ ìˆ˜ ì—†ìœ¼ë‹ˆê¹Œìš”.  

#### í…Œì´ë¸”ì˜ ì—°ê´€ê´€ê³„

![ë‹¤ëŒ€ì¼ í…Œì´ë¸” ì—°ê´€ê´€ê³„](05_2.svg)

- íšŒì› í…Œì´ë¸”ì€ `TEAM_ID` ì™¸ë˜ í‚¤ë¡œ íŒ€ í…Œì´ë¸”ê³¼ ì—°ê´€ê´€ê³„ë¥¼ ë§ºì–´ìš”.
- íšŒì› í…Œì´ë¸”ê³¼ íŒ€í…Œì´ë¸”ì€ ì–‘ë°©í–¥ ê´€ê³„ë¼ë„¤ìš”. íšŒì› í…Œì´ë¸”ì˜ `TEAM_ID` ì™¸ë˜ í‚¤ë¥¼ í†µí•´ì„œ íšŒì›ê³¼ íŒ€ì„ ì¡°ì¸ í•  ìˆ˜ ìˆê³ , ë°˜ëŒ€ë¡œ íŒ€ê³¼ íšŒì›ë„ ì¡°ì¸í•  ìˆ˜ ìˆìœ¼ë‹ˆê¹Œìš”.

ë‹¤ìŒ ì´ê±´ íšŒì›ê³¼ íŒ€ì„ ì¡°ì¸í•˜ëŠ” SQL
```sql
  SELECT *
    FROM MEMBER M
    JOIN TEAM T
      ON M.TEAM_ID = T.TEAM_ID
```
ê·¸ë¦¬ê³  ì´ê±´ ë°˜ëŒ€ë¡œ íŒ€ê³¼ íšŒì›ì„ ì¡°ì¸í•˜ëŠ” SQL
```sql
  SELECT *
    FROM TEAM T
    JOIN MEMBER M
      ON T.TEAM_ID = M.TEAM_ID
```

#### ê°ì²´ ê·¸ë¦¬ê³  í…Œì´ë¸”. ì´ë“¤ì˜ ì—°ê´€ê´€ê³„ì˜ ê°€ì¥ í° ì°¨ì´
ê°ì²´ê°€ ì°¸ì¡°ë¥¼ í†µí•´ ì—°ê´€ê´€ê³„ë¥¼ ë§ºìœ¼ë‹ˆê¹Œ **ë‘ ê°ì²´ê°„ì˜ ì—°ê´€ê´€ê³„ëŠ” ì„œë¡œ ë‹¤ë¥¸ 2ê°œì˜ ë‹¨ë°©í–¥ ê´€ê³„ë¥¼ í†µí•´ì„œ ì–‘ë°©í–¥ ì²˜ëŸ¼ ë§Œë“¤ì–´ìš”.**  
í•˜ì§€ë§Œ í…Œì´ë¸”ì€ ì™¸ë˜ í‚¤ í•˜ë‚˜ë¡œ ì–‘ë°©í–¥ì„ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”.
```java
// ì´ê±´ ë‹¨ë°©í–¥ ì´ê³ ìš”.
class ObjectA {
  ObjectB objB;
}
```
```java
// ì´ê±´ ì–‘ë°©í–¥ ì´ì—ìš”.
class ObjectA {
  ObjectB objB;
}

class ObjectB {
  ObjectA objA;
}
```
ì •ë¦¬í•˜ìë©´, **ê°ì²´ë¥¼ ì–‘ë°©í–¥ ì°¸ì¡°í•˜ë ¤ë©´ ë‹¨ë°©í–¥ ì—°ê´€ê´€ê³„ë¥¼ 2ê°œ ë§Œë“ ë‹¤**ëŠ” ê±°ì£ .

### 1.1 ìˆœìˆ˜í•œ ê°ì²´ ì—°ê´€ê´€ê³„
ë”±íˆ ì ì§€ ì•Šì•„ë„ ì´ì „ ì„¤ëª…ìœ¼ë¡œ ì¶©ë¶„íˆ ì „ë‹¬ëœ ë‚´ìš©ì´ë¼ ì•ˆ ì ì–´ìš”.

### 1.2 í…Œì´ë¸” ì—°ê´€ê´€ê³„
ì´ê²ƒë„ ì—­ì‹œ ì„¤ëª…ì„ í•œë²ˆ ë” ìƒê¸°í•˜ëŠ” ë‚´ìš©ë“¤ì´ì–´ì„œ ê·¸ëƒ¥ ê±´ë„ˆë›°ì–´ìš”.

### 1.3 ê°ì²´ ê´€ê³„ ë§¤í•‘
ë“œë””ì–´ ë§¤í•‘ì„ í•´ë³´ë„¤ìš”. ì—­ì‹œ ì½”ë“œê°€ ì¢‹ë„¤ìš”.  
```java
@Entity
class Member {
  @Id
  @Column(name = "MEMBER_ID")
  private Long id;
  private String username;

  // ì—°ê´€ê´€ê³„ ë§¤í•‘
  @ManyToOne // ê´€ê³„ ë§¤í•‘ì„ ìœ„í•´ ì´ê±´ í•„ìˆ˜ì—¬ì•¼ í•œëŒ€ìš”.
  @JoinColumn(name = "TEAM_ID") // ì´ê±´ ìƒëµ ê°€ëŠ¥í•˜ëŒ€ìš”.
  private Team team;

  // ì—°ê´€ê´€ê³„ ì„¤ì •
  public void setTeam(Team team) {
    this.team = team;
  }

  ...
}
```
```java
@Entity
class Team {
  @Id
  @Column(name = "TEAM_ID")
  private Long id;
  private String name;

  ...
}
```

### 1.4 @JoinColumn
| ì†ì„±                                                               | ê¸°ëŠ¥                       | ê¸°ë³¸ ê°’                           |
| ---------------------------------------------------------------- | ------------------------ | ------------------------------ |
| name                                                             | ë§¤í•‘í•  ì™¸ë˜ í‚¤ ì´ë¦„              | "{í•„ë“œ ì´ë¦„}_{ì°¸ì¡° í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ ì»¬ëŸ¼ ì´ë¦„}" |
| referencedColumnName                                             | ì™¸ë˜ í‚¤ê°€ ì°¸ì¡°í•˜ëŠ” ëŒ€ìƒ í…Œì´ë¸”ì˜ ì»¬ëŸ¼ ì´ë¦„ | ì°¸ì¡°í•˜ëŠ” í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ ì»¬ëŸ¼ ëª…            |
| foreignKey                                                       | DDL ì „ìš©. ì™¸ë˜ í‚¤ ì œì•½ì¡°ê±´ì„ ì§ì ‘ ì§€ì • |                                |
| unique, nullable, insertable, updatable, columnDefinition, table | @Column ì†ì„±ê³¼ ê°™ìŒ           |                                |

> ***@JoinColumn ìƒëµ***
> ìƒëµ ê°€ëŠ¥í•˜ëŒ”ëŠ”ë°, ê·¸ëŸ¬ë©´ ì™¸ë˜ í‚¤ë¥¼ ì°¾ì„ ë•Œ ê¸°ë³¸ ì „ëµì„ ì“´ëŒ€ìš”.  
> i.e. {í•„ë“œëª…;**team**} + "**_**" + {ì°¸ì¡°í•˜ëŠ” í…Œì´ë¸”ì˜ ì»¬ëŸ¼ ì´ë¦„;**TEAM_ID**} = "**team_TEAM_ID**"

### 1.5 @ManyToOne
| ì†ì„±       | ê¸°ëŠ¥                              | ê¸°ë³¸ ê°’                                                          |
| -------- | ------------------------------- | ------------------------------------------------------------- |
| optional | ì—°ê´€ëœ ì—”í‹°í‹°ê°€ ì—†ì–´ë„ ë¨. false ë©´ ê¼­ ìˆì–´ì•¼ í•¨ | true                                                          |
| fetch    | ê¸€ë¡œë²Œ í˜ì¹˜ ì „ëµì„ ì„¤ì •(ë­”ë§?)              | @ManyToOne = FetchType.EAGER <br> @OneToMany = FetchType.LAZY |
| cascade  | ì˜ì†ì„± ì „ì´ ê¸°ëŠ¥ì„ ì‚¬ìš©(ë­”ë§?)              |                                                               |


> ë‹¤ëŒ€ì¼ `@ManyToOne` ê³¼ ë¹„ìŠ·í•œ ì¼ëŒ€ì¼ `@OneToOne` ê´€ê³„ë„ ìˆëŒ€ìš”. ë‹¨ë°©í–¥ ê´€ê³„ë¥¼ ë§¤í•‘í•  ë•Œ ë‘˜ì¤‘ ì–´ë–¤ê²ƒì„ ì‚¬ìš©í•  ì§€ëŠ” ë°˜ëŒ€í¸ ê´€ê³„ì— ë‹¬ë ¤ ìˆê³ ìš”. ê·¸ë‹ˆê¹ `Team` í´ë˜ìŠ¤ì—ì„œ `List<Member> members` ì´ëŸ° í•„ë“œë©´ ë‹¤ëŒ€ì¼, `Member member` ì´ëŸ° í•„ë“œë©´ ì¼ëŒ€ì¼ ì´ë€ ë§ì¸ê°€ ë´ìš”.

<br>

## 2. ì—°ê´€ê´€ê³„ ì‚¬ìš©
CRUD ì— ì—°ê´€ê´€ê³„ë¥¼ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€ ì•Œì•„ë´ìš”.
### 2.1 ì €ì¥
```java
public void save() {
  // save to "Team 1"
  Team team1 = new Team(1L, "Team 1st");
  em.persist(team1);

  // save to "Member 1"
  Member member1 = new Member(1L, "Member 1st");
  member1.setTeam(team1);
  em.persist(member1);

  // save to "Member 2"
  Member member2 = new Member(2L, "Member 2nd");
  member2.setTeam(team1);
  em.persist(member2);
}
```
> âš ï¸ ***WARNKING***  
> ì—”í‹°í‹°ë¥¼ ì €ì¥í•  ë•Œ ì—°ê´€ëœ ëª¨ë“  ì—”í‹°í‹°ëŠ” ì˜ì† ìƒíƒœ ì—¬ì•„ í•œëŒ€ìš”.
> ê·¸ë˜ì„œ ìœ„ì—ì„œë„ `Team` ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë¨¼ì € ì €ì¥í–ˆêµ°ìš”.

### 2.2 ì¡°íšŒ
ì—°ê´€ê´€ê³„ê°€ ìˆëŠ” ì—”í‹°í‹° ì¡°íšŒ ë°©ë²•ì€ 2ê°€ì§€

#### ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰
```java
Member member = em.find(Member.class, 1L);
Team team = member.getTeam() // ê°ì²´ ê·¸ë˜í”„ íƒìƒ‰
```

#### ê°ì²´ì§€í–¥ ì¿¼ë¦¬(JPQL) ì‚¬ìš©
```sql
-- JPQL
select m
  from Member m
  join m.team t
 where t.name = :teamName

-- ì‹¤í–‰ë˜ëŠ” SQL
  SELECT M.*
    FROM MEMBERS M
   INNER
    JOIN TEAM T
      ON M.TEAM_ID = T.ID
   WHERE T.NAME = :teamName
```

### 2.3 ìˆ˜ì •
í…ŒìŠ¤íŠ¸ ì½”ë“œì— ìˆì–´ì„œ ê·¸ëƒ¥ ê·¸ê±¸ ë³´ëŠ” ê±¸ë¡œ í•´ìš”.

### 2.4 ì—°ê´€ê´€ê³„ ì œê±°
```java
Member member = em.find(Member.class, 1L);
member.setTeam(null); // ì—°ê´€ê´€ê³„ ì œê±°
```

### 2.5 ì—°ê´€ëœ ì—”í‹°í‹° ì‚­ì œ
ì™¸ë˜ í‚¤ ì œì•½ì¡°ê±´ì— ì˜í•´ì„œ **ì—°ê´€ê´€ê³„ ëŠì€ í›„ ì‚­ì œ**ë¥¼ í•´ì•¼í•©ë‹ˆë‹¤.
```java
member1.setTeam(null);
member2.setTeam(null);
emremove(team);
```

<br>

## 3. ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„

![ì–‘ë°©í–¥ ê°ì²´ ì—°ê´€ê´€ê³„](05_3.svg)

`Team.member` í•„ë“œê°€ ì¶”ê°€ëì–´ìš”.
ì—°ê´€ ê´€ê³„ë¥¼ ë‹¤ì‹œ ì •ë¦¬í•˜ë©´.
- íšŒì› ---> í‹°ì„ (Member.team)
- í‹°ì„ ---> íšŒì› (TEam.members)
> ğŸ’¬ ***ì°¸ê³ ***  
> JPAëŠ” JCF(Collection, Set, Map ê°™ì€ ê²ƒë“¤)ë¥¼ ì§€ì›í•œëŒ€ìš”.

í…Œì´ë¸” ê´€ê³„ëŠ” ë”°ë¡œ í•´ì¤„ê²Œ ì—†ì´ ê·¸ëƒ¥ ì–‘ë°©í–¥ì´ë€ê±° ì•ì—ì„œ ì–˜ê¸°í–ˆì£ .

### 3.1 ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ ë§¤í•‘
```java
@Entity
class Team {
  @Id
  @Column(name = "TEAM_ID")
  private Long id;
  private String name;

  // ì´ê²Œ ì¶”ê°€ ëì–´ìš”.
  @OneToMany(mappedBy = "team")
  private List<Member> members = new ArrayList<>();
}
```
`@OneToMany` ë¥¼ ì‚¬ìš©í–ˆê³ , `mappedBy` ì†ì„±ì€ ë°˜ëŒ€ìª½ ë§¤í•‘ì˜ í•„ë“œ ê°’ì„ ì¤¬ë‹¤ë„¤ìš”.

### 3.2 ì¼ëŒ€ë‹¤ ì»¬ë ‰ì…˜ ì¡°íšŒ
```java
Team team = em.find(TEam.class, 1L);
List<Member> members = team.getMembers();
```

<br>

## 4. ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸
í…Œì´ë¸”ì€ ì™¸ë˜ í‚¤ í•˜ë‚˜ë¡œ ë‘ í…Œì´ë¸”ì˜ ì—°ê´€ê´€ê³„ë¥¼ ê´€ë¦¬.  
í•˜ì§€ë§Œ ê°ì²´ëŠ” ì—°ê´€ëœ ê°ê°ì˜ ì—”í‹°í‹°ê°€ ê°ì ì°¸ì¡° ëŒ€ìƒì„ ê´€ë¦¬í•´ì¤˜ì•¼ í•˜ì£ .
ì—¬ê¸°ì„œ **ê°ì²´ ì°¸ì¡°ëŠ” 2ê°œì¸ë°, ì™¸ë˜í‚¤ëŠ” 1ê°œì¸ ì°¨ì´**ê°€ ë°œìƒí•´ìš”.  
ê·¸ë˜ì„œ **ë‘ ê°ì²´ê°€ ì—°ê´€ê´€ê³„ ì¤‘ í•˜ë‚˜ë¥¼ ì •í•´ì„œ í…Œì´ë¸”ì˜ ì™¸ë˜ í‚¤ë¥¼ ê´€ë¦¬**í•´ì•¼ í•˜ëŠ”ë° ì´ê²ƒì´ ***ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸owner*** ë¼ê³  í•œëŒ€ìš”.

### 4.1 ì–‘ë°©í–¥ ë§¤í•‘ì˜ ê·œì¹™: ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸
ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸<sub>owner</sub>ë§Œì´ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê´€ê´€ê³„ì™€ ë§¤í•‘ë˜ê³  ì™¸ë˜ í‚¤ë¥¼ ê´€ë¦¬(ë“±ë¡, ìˆ˜ì •, ì‚­ì œ)í•  ìˆ˜ ìˆë‹¤ê³  í•´ìš”. **ì£¼ì¸ì´ ì•„ë‹Œ ìª½ì€ ì½ê¸°ë§Œ ê°€ëŠ¥**í•˜ê³ .
- ì£¼ì¸ì€ `mappedBy` ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ëŒ€ìš”.
- ì£¼ì¸ì´ ì•„ë‹ˆë©´ `mappedBy` ë¥¼ ì¨ì„œ, ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì„ ì§€ì •í•´ì¤˜ì•¼ í•œëŒ€ìš”.

#### íšŒì› ---> íŒ€(Member.team) ë°©í–¥
```java
class Member {
  ...

  @ManyToOne
  @JoinColumn(name = "TEAM_ID")
  private Team team;

  ...
}
```
#### íŒ€ ---> íšŒì›(Team.members) ë°©í–¥
```java
class Team {
  ...

  @OneToMany(mappedBy = "team")
  List<Member> members = new ArrayList<>();

  ...
}
```
"ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì„ ì •í•œë‹¤"ëŠ” ê²ƒì€ ì‚¬ì‹¤ **ì™¸ë˜ í‚¤ ê´€ë¦¬ìë¥¼ ì„ íƒí•˜ëŠ” ê²ƒ**!

### 4.2 ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì€ ì™¸ë˜ í‚¤ê°€ ìˆëŠ” ê³³
ë³„ë‹¤ë¥¸ ì–˜ê¸°ê°€ëŠ” ì—†ì–´ìš”. ê·¸ëƒ¥ `mappedBy` ë¥¼ ì ì ˆí•˜ê²Œ ì‚¬ìš©í•˜ë¼ëŠ” ì–˜ê¸°ì£ .

## 5. ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ ì €ì¥
ë‹¨ë°©í–¥ ì €ì¥í•  ë•Œë‘ ë˜‘ê°™ì•„ìš”. ë­, ë‹¹ì—°í•œ ê²ƒë„ ê°™ë„¤ìš”.

## 6. ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ì˜ ì£¼ì˜ì 
í”íˆ í•˜ëŠ” ì‹¤ìˆ˜ë˜ìš”. "ì‹¤ìˆ˜"ë¼ê¸° ë³´ë‹¤ëŠ” ëª¨ë¥´ê¸° ë•Œë¬¸ì— ì´ë ‡ê²Œ í•˜ëŠ” ê²ƒ ê°™ì•„ìš”.

```java
Member member1 = new Member(1L, "Member 1st");
em.persit(member1);

Member member2 = new Member(2L, "Member 2nd");
em.persist(member2);

Team team1 = new Team(1L, "Team 1st");

// ì£¼ì¸ì´ ì•„ë‹Œ ê³³ì— ì—°ê´€ê´€ê³„ë¥¼ ì„¤ì •í•˜ë„¤ìš”. âŒ
List<Member> members = team1.getMembers();
members.add(member1);
members.add(member2);

em.persist(team1);
```

### 6.1 ìˆœìˆ˜í•œ ê°ì²´ê¹Œì§€ ê³ ë ¤í•œ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„
ê°ì²´ ê´€ì ì—ì„œ ì—°ê´€ê´€ê³„ë¥¼ ê°€ì§€ëŠ” ì–‘ìª½ ë°©í–¥ ëª¨ë‘ì— ê°’ì„ ì…ë ¥í•´ ì£¼ëŠ”ê²Œ ê°€ì¥ ì•ˆì „í•˜ëŒ€ìš”.

```java
Team team1 = new Team(1L, "Team 1st");
em.persist(team1);

Member member1 = new Member(1L, "Member 1st");
member1.setTeam(team1);
team1.getMembers().add(member1);
em.persist(member1);

Member member2 = new Member(2L, "Member 2nd");
member2.setTeam(team1);
team1.getMembers().add(member2);
em.persist(member2);
```

### 6.2 ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì†Œë“œ
ì´ì „ ì½”ë“œì™€ ê°™ì´ ì‘ì„±ì„ í•˜ë‹¤ë³´ë©´ ì‹¤ìˆ˜ë¡œ ì˜ëª» ì‘ì„± í•  ìˆ˜ ìˆìœ¼ë‹ˆê¹Œ ì•„ì˜ˆ setter ë©”ì†Œë“œì— ê´€ê³„ ì„¤ì • ì½”ë“œë¥¼ ë„£ì–´ìš”.
```java
class Member {
  ... 

  private Team team;

  public void setTeam(Team team) {
    this.team = team;
    team.getMembers().add(this);
  }

  ...
}
```
ì´ëŸ¬ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë¦¬í™í† ë§ í•  ìˆ˜ ìˆê² ì£ .
```java
Team team1 = new Team(1L, "Team 1st");
em.persist(team1);

Member member1 = new Member(1L, "Member 1st");
member1.setTeam(team1);
em.persist(member1);

Member member2 = mnew Member(2L, "Member 2nd");
member2.setTeam(team1);
em.persist(member2);
```

### 6.3 ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì†Œë“œ ì‘ì„±ì‹œ ì£¼ì˜ì‚¬í•­
`Member` ì—”í‹°í‹°ê°€ `Team` ì—°ê´€ê´€ê³„ë¥¼ ìˆ˜ì •í•œë‹¤ê³  í–ˆì„ ë•Œ, ê·¸ëƒ¥ `member.setTeam(team2)` ì´ë ‡ê²Œ í•´ë²„ë¦¬ë©´ `team1` ì— ì—”í‹°í‹°ê°€ ë‚¨ì•„ìˆê²Œ ë˜ì–ì•„ìš”.  
ê·¸ë˜ì„œ ì•„ë˜ì²˜ëŸ¼ setter ë©”ì†Œë“œë¥¼ ìˆ˜ì •í•´ì¤˜ì•¼ í•´ìš”.
```java
public void setTeam(Team team) {
  // ê¸°ì¡´ íŒ€ê³¼ ê´€ê³„ë¥¼ ì œê±°
  if (this.team != null) 
    this.team.getMembers().remove(this);

  this.team = team;
  team.getMembers().add(this);
}
```